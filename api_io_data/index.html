
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://chandrasekarnarayana.github.io/foodspec/api_io_data/">
      
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>API reference: IO & datasets - foodspec</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference-io-datasets" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="foodspec" class="md-header__button md-logo" aria-label="foodspec" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            foodspec
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API reference: IO &amp; datasets
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/chandrasekarnarayana/foodspec" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="foodspec" class="md-nav__button md-logo" aria-label="foodspec" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    foodspec
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/chandrasekarnarayana/foodspec" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Overview
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting started
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart_cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart_python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Python quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Workflows
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Workflows
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../oil_auth_tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Oil authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../heating_tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Heating degradation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mixture_tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mixture analysis (EVOO–sunflower)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../qc_tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quality control / novelty detection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hyperspectral_tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hyperspectral analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Domain templates
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Domain templates
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../domains_overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../meat_tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Meat quality
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../microbial_tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Microbial contamination
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    User guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../libraries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Libraries & public datasets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../csv_to_library/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data formats & CSV → HDF5
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ftir_raman_preprocessing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Raman/FTIR preprocessing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../model_registry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model registry
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configs, logging, and reports
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Methods & theory
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Methods & theory
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spectral_basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Spectral concepts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chemometrics_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Machine learning models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../stats_tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Statistical tests for food spectroscopy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../metrics_interpretation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Metrics and interpretation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Protocol & reproducibility
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Protocol & reproducibility
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validation_chemometrics_oils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chemometrics validation (oils)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../methodsx_protocol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MethodsX protocol mapping
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../protocol_benchmarks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Protocol benchmarks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting_faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAQ & troubleshooting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reporting_guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reporting guidelines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference & index
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference & index
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../keyword_index/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Keyword index & glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Advanced
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Advanced
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced_deep_learning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deep learning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../design/01_overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Project
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Project
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../citing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Citing foodspec
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#io" class="md-nav__link">
    <span class="md-ellipsis">
      
        IO
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foodspec.io.loaders" class="md-nav__link">
    <span class="md-ellipsis">
      
        loaders
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foodspec.io.loaders.load_folder" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_folder
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="load_folder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#foodspec.io.loaders.load_folder--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parameters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#foodspec.io.loaders.load_folder--returns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Returns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foodspec.io.loaders.load_from_metadata_table" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_from_metadata_table
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="load_from_metadata_table">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#foodspec.io.loaders.load_from_metadata_table--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parameters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#foodspec.io.loaders.load_from_metadata_table--returns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Returns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foodspec.io.csv_import" class="md-nav__link">
    <span class="md-ellipsis">
      
        csv_import
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="csv_import">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#foodspec.io.csv_import--supported-formats" class="md-nav__link">
    <span class="md-ellipsis">
      
        Supported formats
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foodspec.io.csv_import.load_csv_spectra" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_csv_spectra
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="load_csv_spectra">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#foodspec.io.csv_import.load_csv_spectra--parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parameters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#foodspec.io.csv_import.load_csv_spectra--returns" class="md-nav__link">
    <span class="md-ellipsis">
      
        Returns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foodspec.io.exporters" class="md-nav__link">
    <span class="md-ellipsis">
      
        exporters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foodspec.io.exporters.to_hdf5" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_hdf5
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foodspec.io.exporters.to_tidy_csv" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_tidy_csv
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-loaders" class="md-nav__link">
    <span class="md-ellipsis">
      
        Data loaders
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foodspec.data.loader" class="md-nav__link">
    <span class="md-ellipsis">
      
        loader
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foodspec.data.loader.load_example_oils" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_example_oils
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="load_example_oils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#foodspec.data.loader.load_example_oils--notes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Notes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foodspec.data.public" class="md-nav__link">
    <span class="md-ellipsis">
      
        public
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foodspec.data.public.load_public_evoo_sunflower_raman" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_public_evoo_sunflower_raman
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="load_public_evoo_sunflower_raman">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#foodspec.data.public.load_public_evoo_sunflower_raman--notes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Notes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foodspec.data.public.load_public_ftir_oils" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_public_ftir_oils
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="load_public_ftir_oils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#foodspec.data.public.load_public_ftir_oils--notes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Notes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#foodspec.data.public.load_public_mendeley_oils" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_public_mendeley_oils
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="load_public_mendeley_oils">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#foodspec.data.public.load_public_mendeley_oils--notes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Notes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="api-reference-io-datasets">API reference: IO &amp; datasets</h1>
<p>IO and data modules handle conversion between raw files, CSV, HDF5 libraries, and example/public datasets. For practical steps, see the CSV→Library guide and Libraries section.</p>
<h2 id="io">IO</h2>


<div class="doc doc-object doc-module">



<a id="foodspec.io.loaders"></a>
    <div class="doc doc-contents first">

        <p>I/O loaders for spectral data.</p>










  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h2 id="foodspec.io.loaders.load_folder" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">load_folder</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_folder</span><span class="p">(</span>
    <span class="n">folder</span><span class="p">,</span>
    <span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;*.txt&quot;</span><span class="p">,</span>
    <span class="n">modality</span><span class="o">=</span><span class="s2">&quot;raman&quot;</span><span class="p">,</span>
    <span class="n">metadata_csv</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">wavenumber_column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">intensity_columns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Load spectra from a folder of text files into a <code>FoodSpectrumSet</code>.</p>
<h4 id="foodspec.io.loaders.load_folder--parameters">Parameters</h4>
<p>folder :
    Directory containing spectra files.
pattern :
    Glob pattern for spectra files.
modality :
    Spectroscopy modality string.
metadata_csv :
    Optional CSV with a <code>sample_id</code> column used to merge metadata by file basename.
wavenumber_column :
    Column index for wavenumbers in the spectra files.
intensity_columns :
    Optional indices for intensity columns. If multiple are provided, their mean
    is taken. When omitted, all columns except <code>wavenumber_column</code> are used.</p>
<h4 id="foodspec.io.loaders.load_folder--returns">Returns</h4>
<p>FoodSpectrumSet
    Loaded dataset with a common wavenumber axis.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/foodspec/io/loaders.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_folder</span><span class="p">(</span>
    <span class="n">folder</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">,</span>
    <span class="n">pattern</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;*.txt&quot;</span><span class="p">,</span>
    <span class="n">modality</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;raman&quot;</span><span class="p">,</span>
    <span class="n">metadata_csv</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PathLike</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">wavenumber_column</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">intensity_columns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FoodSpectrumSet</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load spectra from a folder of text files into a ``FoodSpectrumSet``.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    folder :</span>
<span class="sd">        Directory containing spectra files.</span>
<span class="sd">    pattern :</span>
<span class="sd">        Glob pattern for spectra files.</span>
<span class="sd">    modality :</span>
<span class="sd">        Spectroscopy modality string.</span>
<span class="sd">    metadata_csv :</span>
<span class="sd">        Optional CSV with a ``sample_id`` column used to merge metadata by file basename.</span>
<span class="sd">    wavenumber_column :</span>
<span class="sd">        Column index for wavenumbers in the spectra files.</span>
<span class="sd">    intensity_columns :</span>
<span class="sd">        Optional indices for intensity columns. If multiple are provided, their mean</span>
<span class="sd">        is taken. When omitted, all columns except ``wavenumber_column`` are used.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    FoodSpectrumSet</span>
<span class="sd">        Loaded dataset with a common wavenumber axis.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">folder_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
    <span class="n">files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">folder_path</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">pattern</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">files</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No files matching pattern &#39;</span><span class="si">{</span><span class="n">pattern</span><span class="si">}</span><span class="s2">&#39; found in </span><span class="si">{</span><span class="n">folder_path</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="n">w_axes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">spectra</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">sample_ids</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">wav</span><span class="p">,</span> <span class="n">inten</span> <span class="o">=</span> <span class="n">_read_spectrum</span><span class="p">(</span>
            <span class="n">file</span><span class="p">,</span>
            <span class="n">wavenumber_column</span><span class="o">=</span><span class="n">wavenumber_column</span><span class="p">,</span>
            <span class="n">intensity_columns</span><span class="o">=</span><span class="n">intensity_columns</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">w_axes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wav</span><span class="p">)</span>
        <span class="n">spectra</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">inten</span><span class="p">)</span>
        <span class="n">sample_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">stem</span><span class="p">)</span>

    <span class="n">common_axis</span><span class="p">,</span> <span class="n">stacked</span> <span class="o">=</span> <span class="n">_stack_spectra_on_common_axis</span><span class="p">(</span><span class="n">w_axes</span><span class="p">,</span> <span class="n">spectra</span><span class="p">)</span>

    <span class="n">metadata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;sample_id&quot;</span><span class="p">:</span> <span class="n">sample_ids</span><span class="p">})</span>
    <span class="k">if</span> <span class="n">metadata_csv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">meta_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">metadata_csv</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;sample_id&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">meta_df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;metadata_csv must contain a &#39;sample_id&#39; column.&quot;</span><span class="p">)</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">meta_df</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;sample_id&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">FoodSpectrumSet</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">stacked</span><span class="p">,</span>
        <span class="n">wavenumbers</span><span class="o">=</span><span class="n">common_axis</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
        <span class="n">modality</span><span class="o">=</span><span class="n">modality</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="foodspec.io.loaders.load_from_metadata_table" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">load_from_metadata_table</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_from_metadata_table</span><span class="p">(</span>
    <span class="n">metadata_csv</span><span class="p">,</span>
    <span class="n">modality</span><span class="o">=</span><span class="s2">&quot;raman&quot;</span><span class="p">,</span>
    <span class="n">wavenumber_column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">intensity_columns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Load spectra listed in a metadata table.</p>
<h4 id="foodspec.io.loaders.load_from_metadata_table--parameters">Parameters</h4>
<p>metadata_csv :
    CSV file with a <code>file_path</code> column and optional metadata columns.
modality :
    Spectroscopy modality string.
wavenumber_column :
    Column index for wavenumbers in the spectra files.
intensity_columns :
    Optional indices for intensity columns. If multiple are provided, their mean
    is taken.</p>
<h4 id="foodspec.io.loaders.load_from_metadata_table--returns">Returns</h4>
<p>FoodSpectrumSet
    Loaded dataset with a common wavenumber axis.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/foodspec/io/loaders.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_from_metadata_table</span><span class="p">(</span>
    <span class="n">metadata_csv</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">,</span>
    <span class="n">modality</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;raman&quot;</span><span class="p">,</span>
    <span class="n">wavenumber_column</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">intensity_columns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FoodSpectrumSet</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load spectra listed in a metadata table.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    metadata_csv :</span>
<span class="sd">        CSV file with a ``file_path`` column and optional metadata columns.</span>
<span class="sd">    modality :</span>
<span class="sd">        Spectroscopy modality string.</span>
<span class="sd">    wavenumber_column :</span>
<span class="sd">        Column index for wavenumbers in the spectra files.</span>
<span class="sd">    intensity_columns :</span>
<span class="sd">        Optional indices for intensity columns. If multiple are provided, their mean</span>
<span class="sd">        is taken.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    FoodSpectrumSet</span>
<span class="sd">        Loaded dataset with a common wavenumber axis.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">table_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">metadata_csv</span><span class="p">)</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">table_path</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;file_path&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;metadata_csv must contain a &#39;file_path&#39; column.&quot;</span><span class="p">)</span>

    <span class="n">spectra</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">w_axes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">sample_ids</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">resolved_paths</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">file_entry</span> <span class="ow">in</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;file_path&quot;</span><span class="p">]:</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_entry</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">file_path</span><span class="o">.</span><span class="n">is_absolute</span><span class="p">():</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">table_path</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="n">file_path</span>
        <span class="n">resolved_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="n">wav</span><span class="p">,</span> <span class="n">inten</span> <span class="o">=</span> <span class="n">_read_spectrum</span><span class="p">(</span>
            <span class="n">file_path</span><span class="p">,</span>
            <span class="n">wavenumber_column</span><span class="o">=</span><span class="n">wavenumber_column</span><span class="p">,</span>
            <span class="n">intensity_columns</span><span class="o">=</span><span class="n">intensity_columns</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">w_axes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wav</span><span class="p">)</span>
        <span class="n">spectra</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">inten</span><span class="p">)</span>
        <span class="n">sample_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file_path</span><span class="o">.</span><span class="n">stem</span><span class="p">)</span>

    <span class="n">common_axis</span><span class="p">,</span> <span class="n">stacked</span> <span class="o">=</span> <span class="n">_stack_spectra_on_common_axis</span><span class="p">(</span><span class="n">w_axes</span><span class="p">,</span> <span class="n">spectra</span><span class="p">)</span>

    <span class="n">metadata</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;file_path&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">if</span> <span class="s2">&quot;sample_id&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">metadata</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;sample_id&quot;</span><span class="p">,</span> <span class="n">sample_ids</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">FoodSpectrumSet</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">stacked</span><span class="p">,</span>
        <span class="n">wavenumbers</span><span class="o">=</span><span class="n">common_axis</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
        <span class="n">modality</span><span class="o">=</span><span class="n">modality</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="foodspec.io.csv_import"></a>
    <div class="doc doc-contents first">

        <p>CSV import utilities for converting public spectral datasets into FoodSpectrumSet.</p>
<h3 id="foodspec.io.csv_import--supported-formats">Supported formats</h3>
<p>1) 'wide' format (one wavenumber column, one column per spectrum):
   wavenumber, sample_001, sample_002, ...
   500,       123.4,      98.1,       ...
   502,       124.0,      99.2,       ...</p>
<p>2) 'long' / tidy format (one row per (sample, wavenumber)):
   sample_id, wavenumber, intensity, [label], [modality], [any other metadata...]</p>
<p>The loader returns a FoodSpectrumSet, which can be saved as an HDF5 library via
create_library() and used by all foodspec workflows.</p>










  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h2 id="foodspec.io.csv_import.load_csv_spectra" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">load_csv_spectra</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_csv_spectra</span><span class="p">(</span>
    <span class="n">csv_path</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;wide&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">wavenumber_column</span><span class="o">=</span><span class="s2">&quot;wavenumber&quot;</span><span class="p">,</span>
    <span class="n">intensity_columns</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">sample_id_column</span><span class="o">=</span><span class="s2">&quot;sample_id&quot;</span><span class="p">,</span>
    <span class="n">intensity_column</span><span class="o">=</span><span class="s2">&quot;intensity&quot;</span><span class="p">,</span>
    <span class="n">label_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">modality</span><span class="o">=</span><span class="s2">&quot;raman&quot;</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Load spectra from a CSV file into a FoodSpectrumSet.</p>
<h4 id="foodspec.io.csv_import.load_csv_spectra--parameters">Parameters</h4>
<p>csv_path:
    Path to the CSV file.
format:
    'wide'  – one row per wavenumber, one column per sample spectrum.
    'long'  – one row per (sample, wavenumber) with an intensity column.
wavenumber_column:
    Name of the wavenumber column (both formats).
intensity_columns:
    For 'wide' format: which columns contain intensities.
    If None, all non-wavenumber columns are treated as spectra.
sample_id_column:
    For 'long' format: column giving sample identifiers.
intensity_column:
    For 'long' format: column giving intensity values.
label_column:
    Optional column to copy into metadata (e.g., oil_type).
modality:
    'raman', 'ftir', etc. Used to tag the FoodSpectrumSet.</p>
<h4 id="foodspec.io.csv_import.load_csv_spectra--returns">Returns</h4>
<p>FoodSpectrumSet
    Spectral dataset ready for preprocessing and modeling.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/foodspec/io/csv_import.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_csv_spectra</span><span class="p">(</span>
    <span class="n">csv_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span>
    <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;wide&quot;</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">wavenumber_column</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;wavenumber&quot;</span><span class="p">,</span>
    <span class="n">intensity_columns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">sample_id_column</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sample_id&quot;</span><span class="p">,</span>
    <span class="n">intensity_column</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;intensity&quot;</span><span class="p">,</span>
    <span class="n">label_column</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">modality</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;raman&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FoodSpectrumSet</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load spectra from a CSV file into a FoodSpectrumSet.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    csv_path:</span>
<span class="sd">        Path to the CSV file.</span>
<span class="sd">    format:</span>
<span class="sd">        &#39;wide&#39;  – one row per wavenumber, one column per sample spectrum.</span>
<span class="sd">        &#39;long&#39;  – one row per (sample, wavenumber) with an intensity column.</span>
<span class="sd">    wavenumber_column:</span>
<span class="sd">        Name of the wavenumber column (both formats).</span>
<span class="sd">    intensity_columns:</span>
<span class="sd">        For &#39;wide&#39; format: which columns contain intensities.</span>
<span class="sd">        If None, all non-wavenumber columns are treated as spectra.</span>
<span class="sd">    sample_id_column:</span>
<span class="sd">        For &#39;long&#39; format: column giving sample identifiers.</span>
<span class="sd">    intensity_column:</span>
<span class="sd">        For &#39;long&#39; format: column giving intensity values.</span>
<span class="sd">    label_column:</span>
<span class="sd">        Optional column to copy into metadata (e.g., oil_type).</span>
<span class="sd">    modality:</span>
<span class="sd">        &#39;raman&#39;, &#39;ftir&#39;, etc. Used to tag the FoodSpectrumSet.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    FoodSpectrumSet</span>
<span class="sd">        Spectral dataset ready for preprocessing and modeling.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">csv_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">csv_path</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">csv_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;CSV file not found: </span><span class="si">{</span><span class="n">csv_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">csv_path</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">format</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;wide&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">wavenumber_column</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected wavenumber column &#39;</span><span class="si">{</span><span class="n">wavenumber_column</span><span class="si">}</span><span class="s2">&#39; in CSV.&quot;</span><span class="p">)</span>
        <span class="n">wn</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">wavenumber_column</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">intensity_columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">intensity_columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">c</span> <span class="o">!=</span> <span class="n">wavenumber_column</span><span class="p">]</span>
        <span class="n">intensity_columns</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">intensity_columns</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">intensity_columns</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No intensity columns found for &#39;wide&#39; CSV format.&quot;</span><span class="p">)</span>

        <span class="c1"># Transpose so rows = samples, cols = wavenumbers</span>
        <span class="n">spectra</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">intensity_columns</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>  <span class="c1"># shape: (n_samples, n_wn)</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;sample_id&quot;</span><span class="p">:</span> <span class="n">intensity_columns</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">label_column</span> <span class="ow">and</span> <span class="n">label_column</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">metadata</span><span class="p">[</span><span class="n">label_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

    <span class="k">elif</span> <span class="nb">format</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;long&quot;</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">(</span><span class="n">sample_id_column</span><span class="p">,</span> <span class="n">wavenumber_column</span><span class="p">,</span> <span class="n">intensity_column</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">col</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected column &#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&#39; in &#39;long&#39; CSV format.&quot;</span><span class="p">)</span>

        <span class="n">wn</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">wavenumber_column</span><span class="p">]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

        <span class="n">pivot</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
            <span class="n">index</span><span class="o">=</span><span class="n">sample_id_column</span><span class="p">,</span>
            <span class="n">columns</span><span class="o">=</span><span class="n">wavenumber_column</span><span class="p">,</span>
            <span class="n">values</span><span class="o">=</span><span class="n">intensity_column</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">pivot</span> <span class="o">=</span> <span class="n">pivot</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">wn</span><span class="p">)</span>
        <span class="n">spectra</span> <span class="o">=</span> <span class="n">pivot</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="n">sample_id_column</span><span class="p">:</span> <span class="n">pivot</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">to_list</span><span class="p">()})</span>

        <span class="k">if</span> <span class="n">label_column</span> <span class="ow">and</span> <span class="n">label_column</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">df</span><span class="p">[[</span><span class="n">sample_id_column</span><span class="p">,</span> <span class="n">label_column</span><span class="p">]]</span>
                <span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="n">sample_id_column</span><span class="p">])</span>
                <span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">sample_id_column</span><span class="p">)[</span><span class="n">label_column</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">metadata</span><span class="p">[</span><span class="n">label_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="n">sample_id_column</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;format must be &#39;wide&#39; or &#39;long&#39;.&quot;</span><span class="p">)</span>

    <span class="n">ds</span> <span class="o">=</span> <span class="n">FoodSpectrumSet</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="n">spectra</span><span class="p">,</span>
        <span class="n">wavenumbers</span><span class="o">=</span><span class="n">wn</span><span class="p">,</span>
        <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
        <span class="n">modality</span><span class="o">=</span><span class="n">modality</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">validate_spectrum_set</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ds</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="foodspec.io.exporters"></a>
    <div class="doc doc-contents first">

        <p>Export utilities for spectral datasets.</p>










  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h2 id="foodspec.io.exporters.to_hdf5" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">to_hdf5</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_hdf5</span><span class="p">(</span><span class="n">spectra</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Persist spectra to an HDF5 file.</p>
<p>Stores datasets: <code>x</code>, <code>wavenumbers</code>; attribute <code>modality</code>; dataset
<code>metadata_json</code> with metadata serialized via <code>DataFrame.to_json</code>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/foodspec/io/exporters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_hdf5</span><span class="p">(</span><span class="n">spectra</span><span class="p">:</span> <span class="n">FoodSpectrumSet</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Persist spectra to an HDF5 file.</span>

<span class="sd">    Stores datasets: ``x``, ``wavenumbers``; attribute ``modality``; dataset</span>
<span class="sd">    ``metadata_json`` with metadata serialized via ``DataFrame.to_json``.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">h5py</span>
    <span class="k">except</span> <span class="ne">ModuleNotFoundError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>  <span class="c1"># pragma: no cover - tested via importorskip</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s2">&quot;h5py is required for HDF5 export.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>

    <span class="n">metadata_json</span> <span class="o">=</span> <span class="n">spectra</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">h5</span><span class="p">:</span>
        <span class="n">h5</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">spectra</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="n">h5</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s2">&quot;wavenumbers&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">spectra</span><span class="o">.</span><span class="n">wavenumbers</span><span class="p">)</span>
        <span class="n">h5</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s2">&quot;metadata_json&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">bytes_</span><span class="p">(</span><span class="n">metadata_json</span><span class="p">))</span>
        <span class="n">h5</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;modality&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">spectra</span><span class="o">.</span><span class="n">modality</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="foodspec.io.exporters.to_tidy_csv" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">to_tidy_csv</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_tidy_csv</span><span class="p">(</span><span class="n">spectra</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Export spectra to a tidy (long-form) CSV.</p>
<p>Columns: <code>sample_id</code>, all metadata fields, <code>wavenumber</code>, <code>intensity</code>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/foodspec/io/exporters.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_tidy_csv</span><span class="p">(</span><span class="n">spectra</span><span class="p">:</span> <span class="n">FoodSpectrumSet</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Export spectra to a tidy (long-form) CSV.</span>

<span class="sd">    Columns: ``sample_id``, all metadata fields, ``wavenumber``, ``intensity``.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">metadata</span> <span class="o">=</span> <span class="n">spectra</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">if</span> <span class="s2">&quot;sample_id&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">metadata</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;sample_id&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">))</span>

    <span class="n">n_samples</span><span class="p">,</span> <span class="n">n_wavenumbers</span> <span class="o">=</span> <span class="n">spectra</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span>
    <span class="n">repeated_metadata</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">metadata</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">repeated_metadata</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">metadata</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span> <span class="n">n_wavenumbers</span><span class="p">)</span>

    <span class="n">tidy</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">repeated_metadata</span><span class="p">)</span>
    <span class="n">tidy</span><span class="p">[</span><span class="s2">&quot;wavenumber&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">spectra</span><span class="o">.</span><span class="n">wavenumbers</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">)</span>
    <span class="n">tidy</span><span class="p">[</span><span class="s2">&quot;intensity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">spectra</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># Order columns: sample_id, other metadata, wavenumber, intensity</span>
    <span class="n">metadata_cols</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">metadata</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
    <span class="n">other_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">metadata_cols</span> <span class="k">if</span> <span class="n">c</span> <span class="o">!=</span> <span class="s2">&quot;sample_id&quot;</span><span class="p">]</span>
    <span class="n">tidy</span> <span class="o">=</span> <span class="n">tidy</span><span class="p">[[</span><span class="s2">&quot;sample_id&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">other_cols</span><span class="p">,</span> <span class="s2">&quot;wavenumber&quot;</span><span class="p">,</span> <span class="s2">&quot;intensity&quot;</span><span class="p">]]</span>

    <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">tidy</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="data-loaders">Data loaders</h2>


<div class="doc doc-object doc-module">



<a id="foodspec.data.loader"></a>
    <div class="doc doc-contents first">

        <p>Example data loaders.</p>










  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h2 id="foodspec.data.loader.load_example_oils" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">load_example_oils</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_example_oils</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Load a small synthetic edible oils dataset.</p>
<h4 id="foodspec.data.loader.load_example_oils--notes">Notes</h4>
<p>This currently generates synthetic data; in future it can be replaced with
reads from packaged resources via <code>importlib.resources.files</code>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/foodspec/data/loader.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_example_oils</span><span class="p">(</span><span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FoodSpectrumSet</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a small synthetic edible oils dataset.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This currently generates synthetic data; in future it can be replaced with</span>
<span class="sd">    reads from packaged resources via ``importlib.resources.files``.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
    <span class="n">wavenumbers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">1800</span><span class="p">,</span> <span class="mi">250</span><span class="p">)</span>
    <span class="n">n_per_class</span> <span class="o">=</span> <span class="mi">15</span>
    <span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;olive&quot;</span><span class="p">,</span> <span class="s2">&quot;sunflower&quot;</span><span class="p">]</span>
    <span class="n">spectra</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="n">classes</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_per_class</span><span class="p">):</span>
            <span class="n">base</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">wavenumbers</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">cls</span> <span class="o">==</span> <span class="s2">&quot;olive&quot;</span><span class="p">:</span>
                <span class="n">base</span> <span class="o">+=</span> <span class="mf">1.2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">((</span><span class="n">wavenumbers</span> <span class="o">-</span> <span class="mi">1655</span><span class="p">)</span> <span class="o">/</span> <span class="mi">12</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">base</span> <span class="o">+=</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">((</span><span class="n">wavenumbers</span> <span class="o">-</span> <span class="mi">1742</span><span class="p">)</span> <span class="o">/</span> <span class="mi">14</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">base</span> <span class="o">+=</span> <span class="mf">0.8</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">((</span><span class="n">wavenumbers</span> <span class="o">-</span> <span class="mi">1655</span><span class="p">)</span> <span class="o">/</span> <span class="mi">12</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
                <span class="n">base</span> <span class="o">+=</span> <span class="mf">1.3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">((</span><span class="n">wavenumbers</span> <span class="o">-</span> <span class="mi">1742</span><span class="p">)</span> <span class="o">/</span> <span class="mi">14</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">noise</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">wavenumbers</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
            <span class="n">spectra</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">base</span> <span class="o">+</span> <span class="n">noise</span><span class="p">)</span>
            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>

    <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">spectra</span><span class="p">)</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;sample_id&quot;</span><span class="p">:</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lbl</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">lbl</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">labels</span><span class="p">)],</span>
            <span class="s2">&quot;oil_type&quot;</span><span class="p">:</span> <span class="n">labels</span><span class="p">,</span>
            <span class="s2">&quot;matrix&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;pure-oil&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">FoodSpectrumSet</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">X</span><span class="p">,</span> <span class="n">wavenumbers</span><span class="o">=</span><span class="n">wavenumbers</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">modality</span><span class="o">=</span><span class="s2">&quot;raman&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="foodspec.data.public"></a>
    <div class="doc doc-contents first">

        <p>Public dataset loaders for foodspec.</p>
<p>These functions expect users to manually download open datasets to a known
location on disk. Each loader performs light parsing into a FoodSpectrumSet
and attaches basic metadata. They will raise clear errors with instructions
if the expected files are not present.</p>










  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h2 id="foodspec.data.public.load_public_evoo_sunflower_raman" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">load_public_evoo_sunflower_raman</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_public_evoo_sunflower_raman</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Load a public French EVOO–sunflower Raman mixture dataset.</p>
<p>Expected layout (user-provided):
root/
  *.csv  (first column wavenumbers, second column intensity; one spectrum per file)</p>
<p>Metadata:
- mixture_fraction_evoo (parsed from filename if numeric; else NaN)
- dataset_name = "EVOO-Sunflower Raman"
- doi = "10.5281/zenodo.<record_id>" (replace with actual)
- instrument = "<insert instrument name>"
- oil_type (optional: derived from filename)
- modality = "raman"</p>
<h4 id="foodspec.data.public.load_public_evoo_sunflower_raman--notes">Notes</h4>
<p>Download the dataset manually (e.g., from Zenodo with the DOI above) and place files under
<code>~/foodspec_datasets/evoo_sunflower_raman</code> or pass <code>root=...</code>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/foodspec/data/public.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_public_evoo_sunflower_raman</span><span class="p">(</span><span class="n">root</span><span class="p">:</span> <span class="n">PathLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FoodSpectrumSet</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a public French EVOO–sunflower Raman mixture dataset.</span>

<span class="sd">    Expected layout (user-provided):</span>
<span class="sd">    root/</span>
<span class="sd">      *.csv  (first column wavenumbers, second column intensity; one spectrum per file)</span>

<span class="sd">    Metadata:</span>
<span class="sd">    - mixture_fraction_evoo (parsed from filename if numeric; else NaN)</span>
<span class="sd">    - dataset_name = &quot;EVOO-Sunflower Raman&quot;</span>
<span class="sd">    - doi = &quot;10.5281/zenodo.&lt;record_id&gt;&quot; (replace with actual)</span>
<span class="sd">    - instrument = &quot;&lt;insert instrument name&gt;&quot;</span>
<span class="sd">    - oil_type (optional: derived from filename)</span>
<span class="sd">    - modality = &quot;raman&quot;</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Download the dataset manually (e.g., from Zenodo with the DOI above) and place files under</span>
<span class="sd">    ``~/foodspec_datasets/evoo_sunflower_raman`` or pass ``root=...``.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">data_root</span> <span class="o">=</span> <span class="n">_default_root</span><span class="p">(</span><span class="s2">&quot;evoo_sunflower_raman&quot;</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
    <span class="n">csv_files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">data_root</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.csv&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">csv_files</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No CSV files found under </span><span class="si">{</span><span class="n">data_root</span><span class="si">}</span><span class="s2">. &quot;</span>
            <span class="s2">&quot;Download the EVOO–sunflower Raman dataset (DOI placeholder) and place CSVs here.&quot;</span>
        <span class="p">)</span>

    <span class="n">spectra</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">fractions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">fpath</span> <span class="ow">in</span> <span class="n">csv_files</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">fpath</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">wn</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">intensity</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">spectra</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">intensity</span><span class="p">)</span>
        <span class="c1"># parse mixture fraction from filename (e.g., evoo_70.csv -&gt; 70)</span>
        <span class="n">stem_parts</span> <span class="o">=</span> <span class="n">fpath</span><span class="o">.</span><span class="n">stem</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
        <span class="n">frac</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">stem_parts</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">frac</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">frac</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">frac</span> <span class="o">=</span> <span class="n">frac</span> <span class="o">/</span> <span class="mf">100.0</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">continue</span>
        <span class="n">fractions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frac</span> <span class="k">if</span> <span class="n">frac</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
        <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fpath</span><span class="o">.</span><span class="n">stem</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">spectra</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No usable spectra found in </span><span class="si">{</span><span class="n">data_root</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">spectra</span><span class="p">)</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;sample_id&quot;</span><span class="p">:</span> <span class="n">labels</span><span class="p">,</span>
            <span class="s2">&quot;mixture_fraction_evoo&quot;</span><span class="p">:</span> <span class="n">fractions</span><span class="p">,</span>
            <span class="s2">&quot;dataset_name&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;EVOO-Sunflower Raman&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span>
            <span class="s2">&quot;doi&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;10.5281/zenodo.&lt;record_id&gt;&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span>
            <span class="s2">&quot;instrument&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;&lt;insert instrument&gt;&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span>
            <span class="s2">&quot;modality&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;raman&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="n">fs</span> <span class="o">=</span> <span class="n">FoodSpectrumSet</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">X</span><span class="p">,</span> <span class="n">wavenumbers</span><span class="o">=</span><span class="n">wn</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">modality</span><span class="o">=</span><span class="s2">&quot;raman&quot;</span><span class="p">)</span>
    <span class="n">validate_spectrum_set</span><span class="p">(</span><span class="n">fs</span><span class="p">,</span> <span class="n">allow_nan</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">validate_public_evoo_sunflower</span><span class="p">(</span><span class="n">fs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="foodspec.data.public.load_public_ftir_oils" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">load_public_ftir_oils</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_public_ftir_oils</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Load a public FTIR edible-oil dataset.</p>
<p>Expected layout (user-provided):
root/
  *.csv (first column wavenumbers, remaining columns spectra) OR
  one spectrum per CSV (first col wn, second col intensity)</p>
<p>Metadata:
- oil_type (from filename prefix)
- modality = "ftir"
- source = "public"
- doi = "10.5281/zenodo.<record_id>" (replace with actual)</p>
<h4 id="foodspec.data.public.load_public_ftir_oils--notes">Notes</h4>
<p>Download the dataset manually (e.g., from Zenodo or institutional repository) and place files under
<code>~/foodspec_datasets/ftir_oils</code> or pass <code>root=...</code>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/foodspec/data/public.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_public_ftir_oils</span><span class="p">(</span><span class="n">root</span><span class="p">:</span> <span class="n">PathLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FoodSpectrumSet</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a public FTIR edible-oil dataset.</span>

<span class="sd">    Expected layout (user-provided):</span>
<span class="sd">    root/</span>
<span class="sd">      *.csv (first column wavenumbers, remaining columns spectra) OR</span>
<span class="sd">      one spectrum per CSV (first col wn, second col intensity)</span>

<span class="sd">    Metadata:</span>
<span class="sd">    - oil_type (from filename prefix)</span>
<span class="sd">    - modality = &quot;ftir&quot;</span>
<span class="sd">    - source = &quot;public&quot;</span>
<span class="sd">    - doi = &quot;10.5281/zenodo.&lt;record_id&gt;&quot; (replace with actual)</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Download the dataset manually (e.g., from Zenodo or institutional repository) and place files under</span>
<span class="sd">    ``~/foodspec_datasets/ftir_oils`` or pass ``root=...``.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">data_root</span> <span class="o">=</span> <span class="n">_default_root</span><span class="p">(</span><span class="s2">&quot;ftir_oils&quot;</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
    <span class="n">csv_files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">data_root</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.csv&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">csv_files</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No CSV files found under </span><span class="si">{</span><span class="n">data_root</span><span class="si">}</span><span class="s2">. &quot;</span>
            <span class="s2">&quot;Download the public FTIR oils dataset (DOI placeholder) and place CSVs here.&quot;</span>
        <span class="p">)</span>

    <span class="n">spectra_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">wn_ref</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">fpath</span> <span class="ow">in</span> <span class="n">csv_files</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">fpath</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">oil_label</span> <span class="o">=</span> <span class="n">fpath</span><span class="o">.</span><span class="n">stem</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
            <span class="n">intensity</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
            <span class="n">spectra_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">intensity</span><span class="p">)</span>
            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">oil_label</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">wn_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">wn_ref</span> <span class="o">=</span> <span class="n">wn</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">wn</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
            <span class="n">Xcols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
            <span class="n">spectra_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Xcols</span><span class="p">)</span>
            <span class="n">labels</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">oil_label</span><span class="p">]</span> <span class="o">*</span> <span class="n">Xcols</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">wn_ref</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">wn_ref</span> <span class="o">=</span> <span class="n">wn</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">spectra_list</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No usable spectra found in </span><span class="si">{</span><span class="n">data_root</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="n">X_concat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">s</span> <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span> <span class="k">else</span> <span class="n">s</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">spectra_list</span><span class="p">])</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;sample_id&quot;</span><span class="p">:</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lbl</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">lbl</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">labels</span><span class="p">)],</span>
            <span class="s2">&quot;oil_type&quot;</span><span class="p">:</span> <span class="n">labels</span><span class="p">,</span>
            <span class="s2">&quot;modality&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;ftir&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;public&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span>
            <span class="s2">&quot;doi&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;10.5281/zenodo.&lt;record_id&gt;&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="n">fs</span> <span class="o">=</span> <span class="n">FoodSpectrumSet</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">X_concat</span><span class="p">,</span> <span class="n">wavenumbers</span><span class="o">=</span><span class="n">wn_ref</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">modality</span><span class="o">=</span><span class="s2">&quot;ftir&quot;</span><span class="p">)</span>
    <span class="n">validate_spectrum_set</span><span class="p">(</span><span class="n">fs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="foodspec.data.public.load_public_mendeley_oils" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">load_public_mendeley_oils</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_public_mendeley_oils</span><span class="p">(</span><span class="n">root</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Load Raman/FTIR edible oils from a public Mendeley dataset.</p>
<p>Expected layout (user-provided):
root/
  *.csv  (each CSV: first column wavenumbers, remaining columns spectra for a single modality)</p>
<p>Metadata:
- oil_type (from filename stem up to first underscore)
- modality ("raman" or "ftir" inferred from filename if possible; default "raman")
- source = "Mendeley"
- doi = "10.17632/<dataset_id>" (replace with actual)</p>
<h4 id="foodspec.data.public.load_public_mendeley_oils--notes">Notes</h4>
<p>This loader does not download files. Download the dataset from Mendeley
(e.g., https://data.mendeley.com/ with the DOI above) and place the CSVs under the default path:
<code>~/foodspec_datasets/mendeley_oils</code> or pass <code>root=...</code> explicitly.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/foodspec/data/public.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_public_mendeley_oils</span><span class="p">(</span><span class="n">root</span><span class="p">:</span> <span class="n">PathLike</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FoodSpectrumSet</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load Raman/FTIR edible oils from a public Mendeley dataset.</span>

<span class="sd">    Expected layout (user-provided):</span>
<span class="sd">    root/</span>
<span class="sd">      *.csv  (each CSV: first column wavenumbers, remaining columns spectra for a single modality)</span>

<span class="sd">    Metadata:</span>
<span class="sd">    - oil_type (from filename stem up to first underscore)</span>
<span class="sd">    - modality (&quot;raman&quot; or &quot;ftir&quot; inferred from filename if possible; default &quot;raman&quot;)</span>
<span class="sd">    - source = &quot;Mendeley&quot;</span>
<span class="sd">    - doi = &quot;10.17632/&lt;dataset_id&gt;&quot; (replace with actual)</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This loader does not download files. Download the dataset from Mendeley</span>
<span class="sd">    (e.g., https://data.mendeley.com/ with the DOI above) and place the CSVs under the default path:</span>
<span class="sd">    ``~/foodspec_datasets/mendeley_oils`` or pass ``root=...`` explicitly.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">data_root</span> <span class="o">=</span> <span class="n">_default_root</span><span class="p">(</span><span class="s2">&quot;mendeley_oils&quot;</span><span class="p">,</span> <span class="n">root</span><span class="p">)</span>
    <span class="n">csv_files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">data_root</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.csv&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">csv_files</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No CSV files found under </span><span class="si">{</span><span class="n">data_root</span><span class="si">}</span><span class="s2">. &quot;</span>
            <span class="s2">&quot;Download the Mendeley oils dataset (DOI placeholder) and place CSVs here.&quot;</span>
        <span class="p">)</span>

    <span class="n">spectra_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">modality_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">fpath</span> <span class="ow">in</span> <span class="n">csv_files</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">fpath</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">wn</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">X</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>  <span class="c1"># each column is a spectrum</span>
        <span class="n">oil_label</span> <span class="o">=</span> <span class="n">fpath</span><span class="o">.</span><span class="n">stem</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># Simple modality heuristic</span>
        <span class="n">mod</span> <span class="o">=</span> <span class="s2">&quot;ftir&quot;</span> <span class="k">if</span> <span class="s2">&quot;ftir&quot;</span> <span class="ow">in</span> <span class="n">fpath</span><span class="o">.</span><span class="n">stem</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;raman&quot;</span>
        <span class="n">spectra_list</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">X</span><span class="p">,</span> <span class="n">wn</span><span class="p">,</span> <span class="n">oil_label</span><span class="p">,</span> <span class="n">mod</span><span class="p">))</span>
        <span class="n">labels</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">oil_label</span><span class="p">]</span> <span class="o">*</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">modality_list</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">mod</span><span class="p">]</span> <span class="o">*</span> <span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">spectra_list</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No usable spectra found in </span><span class="si">{</span><span class="n">data_root</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="c1"># Assume all share a common axis (or first file as reference)</span>
    <span class="n">X_concat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">spectra_list</span><span class="p">])</span>
    <span class="n">wn_ref</span> <span class="o">=</span> <span class="n">spectra_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;sample_id&quot;</span><span class="p">:</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lbl</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">lbl</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">labels</span><span class="p">)],</span>
            <span class="s2">&quot;oil_type&quot;</span><span class="p">:</span> <span class="n">labels</span><span class="p">,</span>
            <span class="s2">&quot;modality&quot;</span><span class="p">:</span> <span class="n">modality_list</span><span class="p">,</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Mendeley&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span>
            <span class="s2">&quot;doi&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;10.17632/&lt;dataset_id&gt;&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="n">fs</span> <span class="o">=</span> <span class="n">FoodSpectrumSet</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">X_concat</span><span class="p">,</span> <span class="n">wavenumbers</span><span class="o">=</span><span class="n">wn_ref</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">modality</span><span class="o">=</span><span class="s2">&quot;raman&quot;</span><span class="p">)</span>
    <span class="n">validate_spectrum_set</span><span class="p">(</span><span class="n">fs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><blockquote>
<p><strong>Status:</strong> Archived<br />
This page has been superseded by the unified API reference. See <a href="../api_reference/#apps-and-workflows">api_reference.md</a> and <a href="../api_reference/#features-and-ratios">api_reference.md</a> for current IO and data loader APIs.</p>
</blockquote>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": [], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>